<!DOCTYPE html>
<html lang="en">
<head>
    <title>JSON - Parse / Stringify</title>
    <link rel="stylesheet" type="text/css" href="../index.css">
</head>
<body>
<h1>JSON - Parse / Stringify</h1>
<div id="parse"></div>
<br><br><hr><br><br>
<div id="stringify"></div>
<a href="https://ryanarveseth.github.io" class="home">Go Home</a>
</body>
    <script>
        var xmlhttp = new XMLHttpRequest();
        var txt = "";
        xmlhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            // JSON.parse returns a JSON Object
            var myObj = JSON.parse(this.responseText);
            
            txt = "<table class='jsonTable'><tr><th colspan='7'>JSON.parse(txt), JSON.stringify(obj)</th></tr> \
                    <tr><td colspan='3'></td><td colspan='4'><img src='json-parse-stringify.PNG' \
                    style='max-width:650px;' alt='json methods'></td></tr><tr><th colspan='7' \
                    style='text-align:center;'>JSON.parse Method</th> \
                    </tr><tr><th>City</th><th>2010 Population</th><th>2020 Projection</th><th>2030 Projection</th> \
                    <th>2040 Projection</th><th>2050 Projection</th><th>2060 Projection</th></tr>";
            // Now we'll loop through the object and display it to the user
            for (x = 0; x < myObj.length; x++) {
                // the backslash concatenates the strings for me, so I don't have to type it all into one massive line
                // Adds the city, then the 2010 census, then the 2020-2060 projections
                txt += "<tr><td>" + myObj[x].geography + "</td> \
                        <td>" + numberWithCommas(myObj[x]._2010_census) + "</td> \
                        <td>" + numberWithCommas(myObj[x]._2020_projections) + "</td> \
                        <td>" + numberWithCommas(myObj[x]._2030_projections) + "</td> \
                        <td>" + numberWithCommas(myObj[x]._2040_projections) + "</td> \
                        <td>" + numberWithCommas(myObj[x]._2050_projections) + "</td> \
                        <td>" + numberWithCommas(myObj[x]._2060_projections) + "</td></tr>";
            }
            // Don't forget to close off the table
            txt += "</table>";
            document.getElementById("parse").innerHTML = txt;

            // This is going to display stringify
            txt = "<table style='max-width:1200px;'> \
                <tr><th style='text-align:center;'>JSON.stringify(obj) Method</th> \
                </tr><tr><td>" + JSON.stringify(myObj) + "</td></tr></table>";

            document.getElementById("stringify").innerHTML = txt;
          }
        };
        xmlhttp.open("GET", "https://opendata.utah.gov/resource/rnsc-wamv.json", true);
        xmlhttp.send();
        

    function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    </script>
</html>