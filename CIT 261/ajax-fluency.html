<!DOCTYPE html>
<html lang="en">
<head>
    <title>AJAX</title>
    <link rel="stylesheet" type="text/css" href="../index.css">
</head>
<body>
<h1>AJAX</h1>
<table><tr><th colspan='7'>AJAX</th></tr> 
    <tr>
        <td colspan='7'>
            <table style='width:100%;'> 
                <tr>
                    <th colspan='2' style='background:rgb(50,50,50);'>AJAX Requests</th>
                </tr>
                <tr>
                    <td>
                        <ul>
                            <li>AJAX - Asynchonous JavaScript and XML</li>
                            <ul>
                                <li>Not a programming language</li>
                                <li>Read data from a web server - without reloading the page!</li>
                            </ul>
                            <li>While the name indicates only the transfer of XML data,<br>AJAX can get JSON and plain text as well!</li>
                            <ul>
                                <li>The example to the right shows how to get the contents of a txt file<br>If you want to see ajax with json, visit my json fluency page!</li>
                            </ul>
                            <li>Steps of AJAX:</li>
                            <ul>
                                <li>Event: The page is loaded, or a button is clicked.</li>
                                <li>XMLHttpRequest object is created in JavaScript</li>
                                <li>The new object sends a request to the web server</li>
                                <li>The server handles the request</li>
                                <li>The server sends the response back to the page</li>
                                <li>Action: page is updated</li>
                            </ul>
                        </ul>
                    </td>
                    <td>
                        <table class="eTable">
                            <tr><th>AJAX Example</th></tr><tr class="codeExample">
                                <td>
                                    <div class="notes">// here's our AJAX function</div>
                                    function loadDoc() {<br>
                                    <div class="tab">
                                        var aj = document.getElementByID("ajax");
                                        <div class="notes">// create a new XMLHttp request</div>
                                        <div class="highlight">var xhttp = <div style="color:rgb(73, 73, 255);display:inline;">new</div> XMLHttpRequest();</div>
                                            <div class="tab">
                                                <div class="notes">// wait for the xhttp ready state to change</div>
                                                xhttp.onreadystatechange = function() {
                                                <div class="tab">
                                                    <div class="notes">// if it's ready and successful, get response text</div>
                                                    if (this.readyState == 4 && this.status == 200) {<br>
                                                    <div class="tab">
                                                        <div class="notes">// the ajax request returns a 'responseText'</div>
                                                        aj.innerHTML += this.responseText + "< br >";
                                                    </div>
                                                }
                                                </div>
                                            };
                                            </div>
                                        <div class="highlight">xhttp.open("GET, "ajax.txt", true);<br>xhttp.send();</div>
                                    </div>
                                    }
                                    <br><br>
                                    <button onclick="showajax();">Ajax Request</button><br><br><br>
                                    <div id="showAjax"></div>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<script> 
    var x = 0;
    function showajax() { 
        if (x <= 2) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() { 
                if (this.readyState == 4 && this.status == 200) {
                    x++;
                    document.getElementById("showAjax").innerHTML += this.responseText + "<br><br>";
                }
            };
            xhttp.open("GET", "ajax.txt", true);
            xhttp.send();
        }
        else if (x == 3) {
            document.getElementById("showAjax").innerHTML += "<div class='highlight'>That's enough! You're done!</div>";
            x++;
        }
    }

</script>
</body>
<a href="https://ryanarveseth.github.io" class="home">Go Home</a>
</html>